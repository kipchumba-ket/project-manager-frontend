{"ast":null,"code":"var _jsxFileName = \"/home/ket/Desktop/phase-3final-project/frontend/project-manager-frontend/src/pages/Projects/AddProject.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { apiHost } from \"../../Variables\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddProject = () => {\n  _s();\n  var _JSON$parse;\n  const [newProjectFormData, setNewProjectFormData] = useState({\n    name: \"\",\n    topic: \"\",\n    details: \"\",\n    user_id: (_JSON$parse = JSON.parse(localStorage.getItem('user') || false)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.id\n  });\n  function updateFormData(e) {\n    setNewProjectFormData(newProjectFormData => {\n      return {\n        ...newProjectFormData,\n        [e.target.id]: e.target.value\n      };\n    });\n  }\n  function makeCurrentUserProjectMember(newProject) {\n    var _JSON$parse2;\n    const newProjectId = newProject.id;\n    const userId = (_JSON$parse2 = JSON.parse(localStorage.getItem('user') || false)) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.id;\n    console.log(newProjectId, userId);\n    fetch(`${apiHost}/project-memberships`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        project_id: newProjectId,\n        user_id: userId\n      })\n    }).then(res => {\n      if (res.ok) {\n        res.json().then(data => {\n          var _JSON$parse3;\n          console.log(data);\n          setNewProjectFormData({\n            name: \"\",\n            topic: \"\",\n            details: \"\",\n            user_id: (_JSON$parse3 = JSON.parse(localStorage.getItem('user') || false)) === null || _JSON$parse3 === void 0 ? void 0 : _JSON$parse3.id\n          });\n        });\n      } else {\n        res.json().then(error => console.warn(error));\n      }\n    });\n  }\n  const handleForm = e => {\n    e.preventDefault();\n    console.log(newProjectFormData);\n    fetch(`${apiHost}/projects`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newProjectFormData)\n    }).then(res => {\n      if (res.ok) {\n        res.json().then(data => {\n          makeCurrentUserProjectMember(data);\n        });\n      } else {\n        res.json().then(error => console.warn(error));\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col justify-center items-center min-h-screen md:my-16 my-8 mx-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-bold uppercase md:text-2xl text-xl text-gray-800 md:mb-16 mb-8\",\n        children: \"Add New Porject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleForm,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Project Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"name\",\n            type: \"text\",\n            class: \"form-input\",\n            placeholder: \"Project name\",\n            value: newProjectFormData.name,\n            onChange: updateFormData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Subject\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"topic\",\n            type: \"text\",\n            class: \"form-input\",\n            placeholder: \"Topic\",\n            value: newProjectFormData.topic,\n            onChange: updateFormData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Project Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"details\",\n            class: \"textarea textarea-info w-full my-4\",\n            rows: \"4\",\n            placeholder: \"Details\",\n            value: newProjectFormData.details,\n            onChange: updateFormData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary w-full\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(AddProject, \"43mbL0WQxs+lLyehDCUGSLQFwsk=\");\n_c = AddProject;\nexport default AddProject;\nvar _c;\n$RefreshReg$(_c, \"AddProject\");","map":{"version":3,"names":["useState","apiHost","jsxDEV","_jsxDEV","Fragment","_Fragment","AddProject","_s","_JSON$parse","newProjectFormData","setNewProjectFormData","name","topic","details","user_id","JSON","parse","localStorage","getItem","id","updateFormData","e","target","value","makeCurrentUserProjectMember","newProject","_JSON$parse2","newProjectId","userId","console","log","fetch","method","headers","body","stringify","project_id","then","res","ok","json","data","_JSON$parse3","error","warn","handleForm","preventDefault","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","class","placeholder","onChange","rows","_c","$RefreshReg$"],"sources":["/home/ket/Desktop/phase-3final-project/frontend/project-manager-frontend/src/pages/Projects/AddProject.js"],"sourcesContent":["import { useState } from \"react\";\nimport { apiHost } from \"../../Variables\";\n\nconst AddProject = () => {\n    const [newProjectFormData, setNewProjectFormData] = useState(\n        {\n            name: \"\",\n            topic: \"\",\n            details: \"\",\n            user_id: JSON.parse(localStorage.getItem('user') || false)?.id\n        }\n    )\n\n    function updateFormData(e){\n\n        setNewProjectFormData(newProjectFormData => {\n            return {...newProjectFormData, [e.target.id]: e.target.value}\n        })\n\n    }\n\n    function makeCurrentUserProjectMember(newProject){\n        const newProjectId = newProject.id\n        const userId = JSON.parse(localStorage.getItem('user') || false)?.id\n\n        console.log(newProjectId, userId)\n\n        fetch(`${apiHost}/project-memberships`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({project_id: newProjectId, user_id: userId})\n        })\n        .then(res => {\n            if(res.ok){\n                res.json().then(data =>\n                    {\n                        console.log(data)\n                        setNewProjectFormData(\n                            {\n                                name: \"\",\n                                topic: \"\",\n                                details: \"\",\n                                user_id: JSON.parse(localStorage.getItem('user') || false)?.id\n                            }\n                        )\n                    }\n                )\n            }else {\n                res.json().then(error => console.warn(error))\n            }\n        })\n\n    }\n\n    const handleForm = (e) => {\n        e.preventDefault();\n        console.log(newProjectFormData)\n\n        fetch(`${apiHost}/projects`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(newProjectFormData)\n        })\n        .then(res => {\n            if(res.ok){\n                res.json().then(data => {\n                    makeCurrentUserProjectMember(data)\n                })\n            }else {\n                res.json().then(error => console.warn(error))\n            }\n        })\n    }\n\n    return ( \n        <>\n            <div className=\"flex flex-col justify-center items-center min-h-screen md:my-16 my-8 mx-6\">\n                <h1 className=\"font-bold uppercase md:text-2xl text-xl text-gray-800 md:mb-16 mb-8\">Add New Porject</h1>\n                <form onSubmit={handleForm}>\n                    <div>\n                        <label className='form-label'> \n                            Project Name\n                        </label>\n                        <input \n                            id=\"name\"\n                            type=\"text\"  \n                            class=\"form-input\"\n                            placeholder=\"Project name\"\n                            value={newProjectFormData.name}\n                            onChange={updateFormData} \n                        />\n                    </div>\n                    <div>\n                        <label className='form-label'> \n                            Subject\n                        </label>\n                        <input \n                            id=\"topic\"\n                            type=\"text\" \n                            class=\"form-input\"\n                            placeholder=\"Topic\"\n                            value={newProjectFormData.topic}\n                            onChange={updateFormData} \n                        />\n                    </div>\n                    <div>\n                        <label className='form-label'> \n                            Project Details\n                        </label>\n                        <textarea \n                            id=\"details\"\n                            class=\"textarea textarea-info w-full my-4\" \n                            rows='4'\n                            placeholder=\"Details\"\n                            value={newProjectFormData.details}\n                            onChange={updateFormData}\n                        ></textarea>\n                    </div>\n                    <button className=\"btn btn-secondary w-full\">\n                        Submit\n                    </button>\n                </form>\n            </div>\n        </>\n     );\n}\n \nexport default AddProject;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}